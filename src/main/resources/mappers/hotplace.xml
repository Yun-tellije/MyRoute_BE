<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.ws.model.dao.HotplaceDao">
     
<select id="findAllAttractions" resultMap="attMap">
select * from attractions;
</select>

<insert id="createPost" parameterType="HotplacePost">
  INSERT INTO hotplace (
    member_id, attraction_no, title, star_point, content, image
  ) VALUES (
    #{memberId}, #{attractionNo}, #{title}, #{rating}, #{content}, #{image}
  )
</insert>

<select id="getAllPosts" resultMap="hotplaceMap">
  SELECT * from hotplace
</select>

<select id="getHotplaceById" resultMap="hotplacedetailMap">
	select a.hotplace_id, a.member_id, a.title, b.title as attraction_title, a.content, a.created_at, a.updated_at, a.star_point, a.image
	from hotplace a join attractions b on (a.attraction_no = b.no) where hotplace_id = #{hotplaceId}
</select>

<resultMap type="Att" id="attMap">
	<id column="no" property="no"/>
	<result column="title" property="title"/>
	<result column="content_type_id" property="content_type_id"/>
	<result column="content_type_name" property="content_type_name"/>
	<result column="sido_name" property="sido_name"/>
	<result column="gugun_name" property="gugun_name"/>
	<result column="overview" property="overview"/>
	<result column="latitude" property="latitude"/>
	<result column="longitude" property="longitude"/>
	<result column="first_image1" property="first_image1"/>
	<result column="addr1" property="addr1"/>
	</resultMap>
	
	<resultMap type="Hotplace" id="hotplaceMap">
	<id column="hotplace_id" property="hotplaceId"/>
	<result column="member_id" property="memberId"/>
	<result column="attraction_no" property="attractionNo"/>
	<result column="title" property="title"/>
	<result column="content" property="content"/>
	<result column="created_at" property="createdAt"/>
	<result column="updated_at" property="updatedAt"/>
	<result column="star_point" property="starPoint"/>
	<result column="image" property="image"/>
	</resultMap>
	
	<resultMap type="HotplaceDetailResponse" id="hotplacedetailMap">
	<id column="hotplace_id" property="id"/>
	<result column="member_id" property="memberId"/>
	<result column="attraction_title" property="attractionName"/>
	<result column="title" property="title"/>
	<result column="content" property="content"/>
	<result column="created_at" property="createdAt"/>
	<result column="updated_at" property="updatedAt"/>
	<result column="star_point" property="starPoint"/>
	<result column="image" property="image"/>
	</resultMap>
	
</mapper>
